{% extends "base.jinja2" %}
{% block content %}
    <h1>Browsing S3 Bucket <span id="bucket" data-bucket="{{ bucket_name }}">{{ bucket_name }}</span></h1>
            <div>
        <h3>Path: {% for component, path in path_components %}{% if loop.last %}{{ component }}{% else %}<a href="{{ url_for("browse", subpath=path) }}">{{component}}</a>{% endif %}/{% endfor %}</h3>
                <div>
                    <h4>Folders</h4>
                    <table class="table table-striped table-dark">
                      <thead>
                        <tr>
                          <th scope="col">Name</th>
                          <th scope="col">Size</th>
                          <th scope="col">Last Modified</th>
                        </tr>
                      </thead>
                      <tbody>
                        {% for item in bucket_objects.folders %}
                        <tr>
                        <td><a href="{{ subpath }}/{{ item.key}}">{{ item.key }}</a></td>
                          <td>{{ item.size }}</td>
                          <td>{{ item.last_modified }}</td>
                        </tr>
                        {% endfor %}
                      </tbody>
                    </table>
                </div>
                <div>
                    <h4>Files</h4>
                    <table class="table table-striped table-dark">
                      <thead>
                        <tr>
                          <th scope="col">Name</th>
                          <th scope="col">Size</th>
                          <th scope="col">Last Modified</th>
                          <th scope="col"></th>
                        </tr>
                      </thead>
                      <tbody>
                        {% for item in bucket_objects.files %}
                        <tr>
                          <td>{{ item.key }}</td>
                          <td>{{ item.size }}</td>
                          <td>{{ item.last_modified }}</td>
                          <td>
                            {% if allow_download_file %}
                            <a class="btn btn-primary" href="#" role="button" data-key="{{ bucket_path }}{% if bucket_path %}/{% endif %}{{ item.key }}"><i class="fa fa-download" aria-hidden="true"></i></a>
                            {% endif %}  
                          </td>
                        </tr>
                        {% endfor %}
                      </tbody>
                    </table>
                </div>
            </div>
{% endblock %}
